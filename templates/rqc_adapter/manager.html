<!--
© Julius Harms, Freie Universität Berlin 2025
-->

<style>
    .help_text {
        font-size: 0.9em;
        color: #666;
        margin-bottom: 0.5rem;
        line-height: 1.4;
    }
    .error_text {
        font-size: 0.9em;
        color: #e53e3e;
        margin-bottom: 0.5rem;
        line-height: 1.4;
    }
    .field_group {
        margin-bottom: 1rem;
    }
</style>

{% extends "admin/core/base.html" %}
{% load foundation %}

{% block title %}RQC Adapter Manager{% endblock %}

{% block body %}
<div class="box">
    <div class="title-area">
        <h1>Review Quality Collector (RQC)</h1>
    </div>
    <p>
        Review Quality Collector (RQC) is an initiative for improving the quality of
        scientific peer review. Its core is a mechanism that supplies a reviewer with a
        receipt for their work for each journal year. The receipt certifies the quality
        of the reviewing work based on a journal-specific review quality definition.
        This turns reviewing into a source of reputation and so improves reviewer motivation
        and hence review quality.
    </p>
    <p>
        See <a href="https://reviewqualitycollector.org/" target="_blank" rel="noopener noreferrer">reviewqualitycollector.org</a> for details.
    </p>
    <h2>RQC configuration for the current journal</h2>
    <div class="content">
        <form method="POST" action="{% url 'rqc_adapter_handle_journal_settings_update' %}">
            {% csrf_token %}
            <div class="field_group">
                <label for="{{ form.journal_id_field.id_for_label }}">
                        <strong>Journal ID</strong>
                </label>
                {{ form.journal_id_field }}
                <div class="error_text">
                    {{ form.journal_id_field.errors }}
                </div>
                <div class="help_text">
                    {{ form.journal_id_field.help_text | safe }}
                </div>
            </div>
            <div class="field_group">
                <label for="{{ form.journal_api_key_field.id_for_label }}">
                    <strong>Journal API Key</strong>
                </label>
                {% if api_key_set %}
                    API key is currently set. Enter a new key to update.
                {% endif %}
                {{ form.journal_api_key_field }}
                <div class="error_text">
                    {{ form.journal_api_key_field.errors }}
                </div>
                <div class="help_text">
                    {{ form.journal_api_key_field.help_text | safe }}
                </div>
            </div>
            <div class="error_text">
                {% for error in form.non_field_errors %}
                    {{error}}
                {% endfor %}
            </div>
            <div class="form_actions">
                <button type="submit" class="button">Update Settings</button>
            </div>
        </form>
    </div>
</div>
{% endblock body %}
